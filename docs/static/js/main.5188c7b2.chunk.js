(this["webpackJsonpsmart-game-discounts"]=this["webpackJsonpsmart-game-discounts"]||[]).push([[0],{49:function(e,t,a){e.exports=a(61)},54:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(10),i=a.n(o),l=(a(54),a(29)),s=a(82),u=a(94),m=a(89),d=a(90),p=a(84),f=a(38),g=a.n(f),E=a(91),h=a(92);!function(e){e[e.SAME_STUDIO=0]="SAME_STUDIO",e[e.SAME_FRANCHISE=1]="SAME_FRANCHISE",e[e.SEQUEL=2]="SEQUEL",e[e.CONTAINS_TAG=3]="CONTAINS_TAG"}(n||(n={}));var S=[{id:"1",name:"God of War",price:10,studioId:"Santa Monica",franchise:"gow",tags:["rpg"]},{id:"2",name:"God of War 2",price:10.5,studioId:"Santa Monica",franchise:"gow",prequelId:"1",tags:["rpg","open-world"]},{id:"3",name:"God of War 3",price:20,studioId:"Santa Monica",franchise:"gow",prequelId:"2",tags:["rpg","open-world"]},{id:"4",name:"Elder Scrolls",price:40,studioId:"Bethesda",franchise:"elder-scrolls",tags:["rpg","open-world"]},{id:"5",name:"Elder Scrolls 2",price:50,studioId:"Bethesda",franchise:"elder-scrolls",prequelId:"4",tags:["rpg","open-world"]},{id:"6",name:"Elder Scrolls 3",price:60,studioId:"Bethesda",franchise:"elder-scrolls",prequelId:"5",tags:["rpg","open-world"]},{id:"7",name:"Fallout",price:60,studioId:"Bethesda",franchise:"fallout",tags:["rpg","open-world"]}],I=[{id:"1",type:n.SAME_STUDIO,percentage:5,maxPercentage:10,studioId:"Santa Monica"},{id:"2",type:n.CONTAINS_TAG,percentage:10,maxPercentage:20,studioId:"Bethesda",options:{tags:["open-world"]}},{id:"3",type:n.SEQUEL,percentage:50,maxPercentage:50,studioId:"Bethesda"}],v=a(41),y=a(88),N=a(85),b=a(87),w=a(86),O=a(37),A=a.n(O),x=a(93),j=Object(s.a)((function(e){return Object(u.a)({root:{margin:e.spacing(1),minWidth:e.spacing(20),minHeight:e.spacing(20)},studio:{fontSize:14},tags:{color:e.palette.info.light}})})),T=Object(s.a)((function(e){return Object(u.a)({oldPrice:{fontSize:13},discountInfo:{fontSize:15,verticalAlign:"middle"}})})),C=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"});function M(e){var t=e.price,a=e.className;return c.a.createElement(p.a,{color:"textSecondary",className:a},C.format(t))}function G(e){var t=e.price,a=e.discountInfo,n=T();return c.a.createElement("div",null,c.a.createElement("s",null,c.a.createElement(M,{price:t,className:n.oldPrice})),c.a.createElement(p.a,{color:"textSecondary"},C.format(a.price),a?c.a.createElement(x.a,{title:a.info},c.a.createElement(A.a,{className:n.discountInfo})):null))}function _(e){var t,a=e.game,n=e.onBuyGame,r=e.onRemoveGame,o=j();return n&&(t=a.discountInfo?c.a.createElement(G,{price:a.price,discountInfo:a.discountInfo}):c.a.createElement(M,{price:a.price})),c.a.createElement(N.a,{elevation:3,className:o.root},c.a.createElement(w.a,null,c.a.createElement(p.a,{className:o.studio,color:"textSecondary"},a.studioId),c.a.createElement(p.a,{variant:"h5",component:"h2"},a.name),t,c.a.createElement(p.a,{className:o.tags},a.tags.map((function(e){return"#".concat(e)})).join(" "))),c.a.createElement(b.a,null,n?c.a.createElement(y.a,{size:"small",onClick:function(){return n(a)}},"Buy"):null,r?c.a.createElement(y.a,{size:"small",onClick:function(){return r(a)}},"Destroy"):null))}var U=Object(s.a)((function(e){return Object(u.a)({root:{},gameContainer:{display:"flex",flexWrap:"wrap"}})}));function B(e){var t=e.games,a=e.onRemoveGame,n=U();return c.a.createElement(v.a,{elevation:0,className:n.root},c.a.createElement(p.a,{variant:"h4"},"My Library"),c.a.createElement("div",{className:n.gameContainer},t.map((function(e){return c.a.createElement(_,{key:e.id,game:e,onRemoveGame:a})}))))}var R=Object(s.a)((function(e){return Object(u.a)({root:{},gameContainer:{display:"flex",flexWrap:"wrap"}})}));function D(e){var t=e.games,a=e.onBuyGame,n=R();return c.a.createElement(v.a,{elevation:0,className:n.root},c.a.createElement(p.a,{variant:"h4"},"Store"),c.a.createElement("div",{className:n.gameContainer},t.map((function(e){return c.a.createElement(_,{key:e.id,game:e,onBuyGame:a})}))))}var k=Object(s.a)((function(e){return Object(u.a)({root:{},rulesContainer:{display:"flex",flexWrap:"wrap"},rule:{margin:e.spacing(1)}})}));function P(e){var t=e.rules,a=k();return c.a.createElement(v.a,{elevation:0,className:a.root},c.a.createElement(p.a,{variant:"h4"},"Discount Rules"),c.a.createElement("div",{className:a.rulesContainer},t.map((function(e){return c.a.createElement(N.a,{key:e.id,elevation:3,className:a.rule},c.a.createElement(w.a,null,c.a.createElement(p.a,{color:"textSecondary"},e.studioId),c.a.createElement(p.a,null,function(e){var t,a;switch(e.type){case n.SEQUEL:return"".concat(e.percentage,"% discount if you own the prequel of the game");case n.SAME_STUDIO:return"".concat(e.percentage,"% discount per game of the same studio you own, up to ").concat(e.maxPercentage,"%");case n.SAME_FRANCHISE:return"".concat(e.percentage,"% discount per game of the same studio and franchise you own, up to ").concat(e.maxPercentage,"%");case n.CONTAINS_TAG:return"".concat(e.percentage,"% discount per game of the same studio and with tags '").concat(null===(t=e.options)||void 0===t||null===(a=t.tags)||void 0===a?void 0:a.join(" or "),"' you own, up to ").concat(e.maxPercentage,"%")}}(e))))}))))}var q=a(39);function F(e,t,a){return t.studioId!==e.studioId?0:e.type===n.SEQUEL?t.prequelId&&a.find((function(e){return e.id===t.prequelId}))?1:0:a.reduce((function(a,r){var c,o,i;return a+(L(e.type,t,r)||(c=e.type,o=t,i=r,c===n.SAME_FRANCHISE&&L(n.SAME_STUDIO,o,i)&&o.franchise===i.franchise)||function(e,t,a,r){return e===n.CONTAINS_TAG&&a.studioId===t&&a.tags.findIndex((function(e){return r.tags.includes(e)}))>-1}(e.type,e.studioId,r,e.options)?1:0)}),0)}function L(e,t,a){return e===n.SAME_STUDIO&&t.studioId===a.studioId}function W(e,t,a){var r=e.map((function(e){var r=F(e,t,a)||0,c=Math.min(r*e.percentage,e.maxPercentage);return{percentage:c,info:function(e,t,a,r){var c;switch(a){case n.SEQUEL:return"".concat(e,"% discount because you own the prequel of this game");case n.SAME_STUDIO:return"".concat(e,"% discount because you own ").concat(t," games of the same studio");case n.SAME_FRANCHISE:return"".concat(e,"% discount because you own ").concat(t," games of the same franchise");case n.CONTAINS_TAG:return"".concat(e,"% discount because you own ").concat(t," games with the tags '").concat(null===r||void 0===r||null===(c=r.tags)||void 0===c?void 0:c.join(" or "),"'")}}(c,r,e.type,e.options),price:t.price-t.price*c/100}})).filter((function(e){return e.percentage>0})).sort((function(e,t){return e.percentage-t.percentage}));return r.length?r[r.length-1]:void 0}var H=Object(s.a)((function(e){return Object(u.a)({root:{padding:e.spacing(1)},title:{flexGrow:1}})}));function Q(){var e=H(),t=Object(r.useState)(S),a=Object(l.a)(t,2),n=a[0],o=a[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],f=s[1];Object(r.useEffect)((function(){var e,t,a=u.map((function(e){return e.id})),n=S.filter((function(e){return!a.includes(e.id)})),r=(e=I,t=u,n.map((function(a){return Object(q.a)({},a,{discountInfo:W(e,a,t)})})));o(r)}),[u]);return c.a.createElement("div",null,c.a.createElement(m.a,{position:"static"},c.a.createElement(d.a,null,c.a.createElement(p.a,{variant:"h6",className:e.title},"Studio fidelity program"),c.a.createElement(E.a,{edge:"start",color:"inherit","aria-label":"github",target:"blank",href:"https://github.com/Brunomachadob/smart-game-discounts"},c.a.createElement(g.a,null)))),c.a.createElement("div",{className:e.root},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},c.a.createElement(h.a,{item:!0},c.a.createElement(p.a,{color:"textSecondary"},"This is a small toy application showcasing a fidelity program that studios would apply on a market place (Steam for example) that would give discounts based on games the user already have in their library.")),c.a.createElement(h.a,{item:!0},c.a.createElement(P,{rules:I})),c.a.createElement(h.a,{container:!0,item:!0,direction:"row"},c.a.createElement(h.a,{item:!0,xs:12,sm:6},c.a.createElement(D,{games:n,onBuyGame:function(e){f((function(t){return t.concat(e)}))}})),c.a.createElement(h.a,{item:!0,xs:12,sm:6},c.a.createElement(B,{games:u,onRemoveGame:function(e){f((function(t){return t.filter((function(t){return t.id!==e.id}))}))}}))))))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Q,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.5188c7b2.chunk.js.map