(this["webpackJsonpsmart-game-discounts"]=this["webpackJsonpsmart-game-discounts"]||[]).push([[0],{49:function(e,t,a){e.exports=a(61)},54:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(10),i=a.n(c),s=(a(54),a(29)),u=a(81),l=a(92),d=a(88),m=a(89),p=a(83),f=a(38),g=a.n(f),E=a(90);!function(e){e[e.SAME_STUDIO=0]="SAME_STUDIO",e[e.SAME_FRANCHISE=1]="SAME_FRANCHISE",e[e.SEQUEL=2]="SEQUEL",e[e.CONTAINS_TAG=3]="CONTAINS_TAG"}(n||(n={}));var h=[{id:"1",name:"God of War",price:10,studioId:"Santa Monica",franchise:"gow",tags:["rpg"]},{id:"2",name:"God of War 2",price:10.5,studioId:"Santa Monica",franchise:"gow",prequelId:"1",tags:["rpg","open-world"]},{id:"3",name:"God of War 3",price:20,studioId:"Santa Monica",franchise:"gow",prequelId:"2",tags:["rpg","open-world"]},{id:"4",name:"Elder Scrolls",price:40,studioId:"Bethesda",franchise:"elder-scrolls",tags:["rpg","open-world"]},{id:"5",name:"Elder Scrolls 2",price:50,studioId:"Bethesda",franchise:"elder-scrolls",prequelId:"4",tags:["rpg","open-world"]},{id:"6",name:"Elder Scrolls 3",price:60,studioId:"Bethesda",franchise:"elder-scrolls",prequelId:"5",tags:["rpg","open-world"]},{id:"7",name:"Fallout",price:60,studioId:"Bethesda",franchise:"fallout",tags:["rpg","open-world"]}],S=[{id:"1",type:n.SAME_STUDIO,percentage:5,maxPercentage:10,studioId:"Santa Monica"},{id:"2",type:n.CONTAINS_TAG,percentage:10,maxPercentage:20,studioId:"Bethesda",options:{tags:["open-world"]}},{id:"3",type:n.SEQUEL,percentage:50,maxPercentage:50,studioId:"Bethesda"}],I=a(41),v=a(87),y=a(84),N=a(86),b=a(85),w=a(37),O=a.n(w),A=a(91),x=Object(u.a)((function(e){return Object(l.a)({root:{margin:e.spacing(1),minWidth:e.spacing(20),minHeight:e.spacing(20)},studio:{fontSize:14},tags:{color:e.palette.info.light}})})),j=Object(u.a)((function(e){return Object(l.a)({oldPrice:{fontSize:13},discountInfo:{fontSize:15,verticalAlign:"middle"}})})),T=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"});function C(e){var t=e.price,a=e.className;return o.a.createElement(p.a,{color:"textSecondary",className:a},T.format(t))}function G(e){var t=e.price,a=e.discountInfo,n=j();return o.a.createElement("div",null,o.a.createElement("s",null,o.a.createElement(C,{price:t,className:n.oldPrice})),o.a.createElement(p.a,{color:"textSecondary"},T.format(a.price),a?o.a.createElement(A.a,{title:a.info},o.a.createElement(O.a,{className:n.discountInfo})):null))}function M(e){var t,a=e.game,n=e.onBuyGame,r=e.onRemoveGame,c=x();return n&&(t=a.discountInfo?o.a.createElement(G,{price:a.price,discountInfo:a.discountInfo}):o.a.createElement(C,{price:a.price})),o.a.createElement(y.a,{key:a.id,elevation:3,className:c.root},o.a.createElement(b.a,null,o.a.createElement(p.a,{className:c.studio,color:"textSecondary"},a.studioId),o.a.createElement(p.a,{variant:"h5",component:"h2"},a.name),t,o.a.createElement(p.a,{className:c.tags},a.tags.map((function(e){return"#".concat(e)})).join(" "))),o.a.createElement(N.a,null,n?o.a.createElement(v.a,{size:"small",onClick:function(){return n(a)}},"Buy"):null,r?o.a.createElement(v.a,{size:"small",onClick:function(){return r(a)}},"Destroy"):null))}var _=Object(u.a)((function(e){return Object(l.a)({root:{},gameContainer:{display:"flex",flexWrap:"wrap"}})}));function U(e){var t=e.games,a=e.onRemoveGame,n=_();return o.a.createElement(I.a,{elevation:0,className:n.root},o.a.createElement(p.a,{variant:"h4"},"My Library"),o.a.createElement("div",{className:n.gameContainer},t.map((function(e){return o.a.createElement(M,{game:e,onRemoveGame:a})}))))}var B=Object(u.a)((function(e){return Object(l.a)({root:{},gameContainer:{display:"flex",flexWrap:"wrap"}})}));function R(e){var t=e.games,a=e.onBuyGame,n=B();return o.a.createElement(I.a,{elevation:0,className:n.root},o.a.createElement(p.a,{variant:"h4"},"Store"),o.a.createElement("div",{className:n.gameContainer},t.map((function(e){return o.a.createElement(M,{game:e,onBuyGame:a})}))))}var D=Object(u.a)((function(e){return Object(l.a)({root:{},rulesContainer:{display:"flex",flexWrap:"wrap"},rule:{margin:e.spacing(1)}})}));function P(e){var t=e.rules,a=D();return o.a.createElement(I.a,{elevation:0,className:a.root},o.a.createElement(p.a,{variant:"h4"},"Discount Rules"),o.a.createElement("div",{className:a.rulesContainer},t.map((function(e){return o.a.createElement(y.a,{key:e.id,elevation:3,className:a.rule},o.a.createElement(b.a,null,o.a.createElement(p.a,{color:"textSecondary"},e.studioId),o.a.createElement(p.a,null,function(e){var t,a;switch(e.type){case n.SEQUEL:return"".concat(e.percentage,"% discount if you own the prequel of the game");case n.SAME_STUDIO:return"".concat(e.percentage,"% discount per game of the same studio you own, up to ").concat(e.maxPercentage,"%");case n.SAME_FRANCHISE:return"".concat(e.percentage,"% discount per game of the same studio and franchise you own, up to ").concat(e.maxPercentage,"%");case n.CONTAINS_TAG:return"".concat(e.percentage,"% discount per game of the same studio and with tags '").concat(null===(t=e.options)||void 0===t||null===(a=t.tags)||void 0===a?void 0:a.join(" or "),"' you own, up to ").concat(e.maxPercentage,"%")}}(e))))}))))}var k=a(39);function q(e,t,a){return t.studioId!==e.studioId?0:e.type===n.SEQUEL?t.prequelId&&a.find((function(e){return e.id===t.prequelId}))?1:0:a.reduce((function(a,r){var o,c,i;return a+(F(e.type,t,r)||(o=e.type,c=t,i=r,o===n.SAME_FRANCHISE&&F(n.SAME_STUDIO,c,i)&&c.franchise===i.franchise)||function(e,t,a,r){return e===n.CONTAINS_TAG&&a.studioId===t&&a.tags.findIndex((function(e){return r.tags.includes(e)}))>-1}(e.type,e.studioId,r,e.options)?1:0)}),0)}function F(e,t,a){return e===n.SAME_STUDIO&&t.studioId===a.studioId}function L(e,t,a){var r=e.map((function(e){var r=q(e,t,a)||0,o=Math.min(r*e.percentage,e.maxPercentage);return{percentage:o,info:function(e,t,a,r){var o;switch(a){case n.SEQUEL:return"".concat(e,"% discount because you own the prequel of this game");case n.SAME_STUDIO:return"".concat(e,"% discount because you own ").concat(t," games of the same studio");case n.SAME_FRANCHISE:return"".concat(e,"% discount because you own ").concat(t," games of the same franchise");case n.CONTAINS_TAG:return"".concat(e,"% discount because you own ").concat(t," games with the tags '").concat(null===r||void 0===r||null===(o=r.tags)||void 0===o?void 0:o.join(" or "),"'")}}(o,r,e.type,e.options),price:t.price-t.price*o/100}})).filter((function(e){return e.percentage>0})).sort((function(e,t){return e.percentage-t.percentage}));return r.length?r[r.length-1]:void 0}var W=Object(u.a)((function(e){return Object(l.a)({root:{flexGrow:1,padding:e.spacing(1),"& > *":{margin:e.spacing(1)}},title:{flexGrow:1}})}));function H(){var e=W(),t=Object(r.useState)(h),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)([]),u=Object(s.a)(i,2),l=u[0],f=u[1];Object(r.useEffect)((function(){var e,t,a=l.map((function(e){return e.id})),n=h.filter((function(e){return!a.includes(e.id)})),r=(e=S,t=l,n.map((function(a){return Object(k.a)({},a,{discountInfo:L(e,a,t)})})));c(r)}),[l]);return o.a.createElement("div",null,o.a.createElement(d.a,{position:"static"},o.a.createElement(m.a,null,o.a.createElement(p.a,{variant:"h6",className:e.title},"Studio fidelity program"),o.a.createElement(E.a,{edge:"start",color:"inherit","aria-label":"github",target:"blank",href:"https://github.com/Brunomachadob/smart-game-discounts"},o.a.createElement(g.a,null)))),o.a.createElement("div",{className:e.root},o.a.createElement(p.a,{color:"textSecondary"},"This is a small toy application showcasing a fidelity program that studios would apply on a market place (Steam for example) that would give discounts based on games the user already have in their library."),o.a.createElement(P,{rules:S}),o.a.createElement(R,{games:n,onBuyGame:function(e){f((function(t){return t.concat(e)}))}}),o.a.createElement(U,{games:l,onRemoveGame:function(e){f((function(t){return t.filter((function(t){return t.id!==e.id}))}))}})))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(H,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.eaa3bf96.chunk.js.map